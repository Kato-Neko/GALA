<!-- In reminder_list.html -->
{% extends 'base.html' %}

{{% block content %}
<div id="calendar" class="my-8 mx-auto max-w-4xl"></div>

<!-- Reminder Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="reminder-modal">
    <div class="bg-white p-8 rounded-lg shadow-lg max-w-sm w-full">
        <h2 class="text-xl font-bold mb-4">Create Reminder</h2>
        <form method="post" action="{% url 'reminder-create' %}" id="reminder-form">
            {% csrf_token %}
            <label for="description" class="block text-sm font-medium mb-2">Description:</label>
            <input type="text" name="description" required class="w-full p-2 mb-4 border rounded-md">

            <label for="start_time" class="block text-sm font-medium mb-2">Start Time:</label>
            <input type="time" name="start_time" required class="w-full p-2 mb-4 border rounded-md">

            <label for="end_time" class="block text-sm font-medium mb-2">End Time:</label>
            <input type="time" name="end_time" required class="w-full p-2 mb-4 border rounded-md">

            <input type="hidden" name="date" id="selected-date">

            <button type="submit" class="w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-700">Save</button>
        </form>
        <button class="w-full mt-4 bg-red-500 text-white py-2 rounded-md hover:bg-red-700"
            onclick="closeModal()">Close</button>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            events: {{ events| safe }},  <!-- Pass events from the context -->
        dayClick: function (date, jsEvent, view) {
            openModal(date.format());
        }
        });
    });

    function openModal(date) {
        $('#selected-date').val(date);
        $('#reminder-modal').removeClass('hidden');
    }

    function closeModal() {
        $('#reminder-modal').addClass('hidden');
    }
</script>

{% endblock %}